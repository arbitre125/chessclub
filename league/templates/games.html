{% extends 'base.html' %}
{% block title %}{{ page_name }}{% endblock %}

{% load i18n %}
{% load league_tags %}
{% block content %}
{% for season,leagues in games.items %}

<h1>{% if page_name %}{{ page_name }}{% else %} {{player}} {% endif %}</h1>
<hr />
<h2> Profile </h2>
<hr />

<h2> Games </h2>
<article id="league-{{ slug }}-player" class="news">
    <div class = "col-md-7 ml-auto mr-auto text-center">
      <h2>{{season}}</h2>
      {% for league,games in leagues.items %}
        <table class="table table-striped table-hover league-table">
          <thead>
            <tr><td colspan="4" class="text-center bg-white text-dark"><h2>{{league.name}}</h2></td></tr>
              <tr>
                <th class="text-center">{% trans "Date" %}</th>
                <th class="text-center">{% trans "Opponent" %}</th>
                <th class="text-center">{% trans "Colour" %}</th>
                <th class="text-center">{% trans "Result" %}</th>
              </tr>
            </thead>
            <tbody>
            {% for match in games %}
            <tr>
                <td class="text-center"><a href="{% url 'game' match.id %}">{% if match.date %}{{match.date.date}}{% endif %}</a></td>
                {% if match.white == player %}
                <td class="text-center"><a href="{% url 'game' match.id %}">{{match.black}}</a></td>
                <td class="text-center"><a href="{% url 'game' match.id %}">W</a></td>
                <td class="text-center"><a href="{% url 'game' match.id %}">{% if match.result == 0 %}D {% elif match.result == 1 %} W {% elif match.result == 2 %} L {% else %} - {% endif %}</a></td>
                {% else %}
                <td class="text-center"><a href="{% url 'game' match.id %}">{{match.white}}</a></td>
                <td class="text-center"><a href="{% url 'game' match.id %}">B</a></td>
                <td class="text-center"><a href="{% url 'game' match.id %}">{% if match.result == 0 %}
                  D {% elif match.result == 1 %} L {% elif match.result == 2 %} W {% else %} - {% endif %}</a></td>
                  {% endif %}
            </tr>
    {% endfor %}
    
                   </tbody>
            </table>
            {% endfor %}
            {% endfor %}

          </div>
</article>
<hr />
{% endblock %}