{% extends 'base.html' %}
{% block title %}{{ page_name }}{% endblock %}

{% load i18n %}
{% load league_tags %}
{% block content %}
{% for season,leagues in games.items %}
<article id="league-{{ slug }}-player" class="news">
    <h1>{% if page_name %}{{ page_name }}{% else %} {{player}} {% endif %}</h1>
    <hr />
    <h1>{{season}}</h1>
    <div class = "col-md-7 ml-auto mr-auto">
    {% for league,games in leagues.items %}
        <table class="table table-striped table-bordered table-hover">
          <thead>
            <tr><td colspan="4" class="text-center"><h2>{{league.name}}</h2></td></tr>

              <tr>
                <th class="text-center">{% trans "Date" %}</th>
                <th class="text-center">{% trans "Opponent" %}</th>
                <th class="text-center">{% trans "Colour" %}</th>
                <th class="text-center">{% trans "Result" %}</th>
              </tr>
            </thead>
            <tbody>
            {% for match in games %}
            <tr>
                <td class="text-center"><a href="{% url 'game' match.id %}">{{match.date}}</a></td>
                {% if match.white == player %}
                <td class="text-center"><a href="{% url 'game' match.id %}">{{match.black}}</a></td>
                <td class="text-center"><a href="{% url 'game' match.id %}">W</a></td>
                <td class="text-center"><a href="{% url 'game' match.id %}">{% if match.result == 0 %}1/2-1/2 {% elif match.result == 1 %} 1-0 {% else %} 0-1 {% endif %}</a></td>
                {% else %}
                <td class="text-center"><a href="{% url 'game' match.id %}">{{match.white}}</a></td>
                <td class="text-center"><a href="{% url 'game' match.id %}">B</a></td>
                <td class="text-center"><a href="{% url 'game' match.id %}">{% if match.result == 0 %}
                  1/2-1/2 {% elif match.result == 1 %} 0-1 {% else %} 1-0 {% endif %}</a></td>
                  {% endif %}
            </tr>
    {% endfor %}
    
                   </tbody>
            </table>
            {% endfor %}
            {% endfor %}

          </div>
</article>
<hr />
{% endblock %}