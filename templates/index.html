    {% extends 'base.html' %}
    {% load static %}
    {% block title %}{{ game }}{% endblock %}
    {% block header %} 
    <script src="{% static 'js/pgnv.js' %}" type="text/javascript"></script>
    <!-- CSS used -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{% static 'css/pgnvjs.css' %}">
    {% endblock %}
    {% load i18n %}
    {% load league_tags %}
    {% load user_agents %}
    {% block content %}

    <div class="row">
        <div class = "header mb-3"><i class="fas fa-chess-knight"></i> About Us</div>
            <div class = "news-body">
                Wallasey Chess Club is a member of the English Chess Federation, and is the biggest and friendliest chess club on the Wirral. We have many internal tournaments running throughout the year, and have teams playing against other clubs in both the Wirral and Merseyside Leagues - together with Cup competitions - so there is plenty of chess for everyone! New members are always welcome so please get in touch by <a href="mailto:contact@wallaseychessclub.uk">e-mail</a> or just come down to the club one evening. We play at Wallasey Central Conservative Club on Mondays and Thursday evenings, with the games starting at 7.30pm.
            </div>
        </div>
    <div class = "row">
        <div class = "col mr-3 mt-3">
            <div class = "row">
                <div class = "header mb-3"><i class="fas fa-newspaper"></i> Latest News</div>
                {% for n in news %}
                {% if forloop.counter < 2 %}
                    <div class = "news-item">
                        <div class = "news-header"><div class="mr-auto">{{n.title}}</div><div class="small">{{n.published_date.date}}</div></div>
                        <div class = "news-body cleafix">
                            {% if n.image %}
                            <img src="{{ n.image.url }}">
                            {% endif %}
                            {{ n.text|safe }}
                        </div>
                        <div class = "news-footer">
                            Published by {{n.author.first_name}} {{n.author.last_name}}
                        </div>
                    </div>
                {% elif forloop.counter < 6 %}
                    <div class = "headline-item">
                        <div class = "headline-header"><div class="mr-auto">{{n.title}}</div><div class="small">{{n.published_date.date}}</div></div>
                        {% if n.image %}
                        <img src="{{ n.image.url }}">
                        {% endif %}
                        {{ n.text|safe|truncatewords:"50" }}<a href="{% url 'news' %}#{{n.id}}">read more</a>

                        <div class = "headline-footer">
                            Published by {{n.author.first_name}} {{n.author.last_name}}
                        </div>
                    </div>
                {% endif %}
                {% endfor %}
            </div>

            <div class = "row">
                <div class = "header"><i class="fas fa-puzzle-piece"></i> Daily Puzzle</div>
                    <div class = "ml-auto mr-auto puzzle">
                        <div id="board" class='merida zeit'></div>
                    </div>
            </div>
        </div>

        <div class = "col-md-4 mt-3">

            <div class = "row">
                <div class = "header"><i class="fas fa-calendar-alt"></i> Club Calendar</div>
                
                <div class = "calendar">
                    {% if events|length == 0 %}
                    No events scheduled at the moment. Check back later!
                    {% endif %}
                    {% for event in events %}
                    <div class = "calendar-event">
                        <table class = "calendar-event mr-2">
                            <tr><td class = "calendar-day"> {{event.date|date:'D'}} </td><td class="px-2"> <a class="event-link" {% if event.link %} href = "{{event.link}}" {% endif %}>{{event.title}}</a> </td></tr>
                            <tr><td class = "calendar-month"> {{event.date|date:'d-M'}} </td><td class = "px-2"> {% if event.location %} {{event.location}}, {% endif %}{{event.date|date:'H:i'}}</td></tr>
                        </table>
                    </div>
                    {% endfor %}
                </div>
            
                <div class = "row">
                    <div class = "header"><i class="fas fa-calendar-alt"></i> League Fixtures</div>
                    
                    <div class = "calendar">
                        {% if fixtures|length == 0 %}
                        No fixtures scheduled at the moment.
                        {% endif %}
                        {% for fixture in fixtures %}
                        <div class = "calendar-event">
                            <table class = "calendar-event mr-2">
                                <tr><td class = "calendar-day"> {{fixture.date|date:'D'}} </td><td class="px-2"> {{fixture}}</td></tr>
                                <tr><td class = "calendar-month"> {{fixture.date|date:'d-M'}}</td><td class="px-2">{{fixture.team.league}}</td></tr>
                            </table>
                        </div>
                        {% endfor %}
                    </div>
            </div>

            <div class = "row" >

            <div class="row">
                <div class = "header mb-3"><i class="fab fa-twitter"></i> @WallaseyChess</div>
                    <div class = "news-body">
                        <a class="twitter-timeline" data-tweet-limit="3" href="https://twitter.com/WallaseyChess?ref_src=twsrc%5Etfw"></a>
                        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> 

                    </div>
                </div>

            </div>
        </div>
    </div>
    <script>
        {% for puzzle in puzzles %}
        window.addEventListener("load", function() {
        var board = document.getElementById('board');
        var width = board.parentElement.offsetWidth;
        console.log(board.parentElement);
        console.log('width', width);
        var pgn = `{{puzzle.pgn|safe}}`;
        var cfg = {pgn: pgn, showCoords: false, theme: 'default', pieceStyle: 'wikipedia', locale: 'en', timerTime: '', layout: 'top', showFen: false, coordsInner: false, headers: false, coordsFactor: '1.0', colorMarker: '', startPlay: '', hideMovesBefore: true, hideMovesAfter: true, notation: 'short', 'width' : width.toString()+'px' };
        PGNV.pgnTactic('board', cfg);
        {% endfor %}
    }
        )
    </script> 
    {% endblock %}
